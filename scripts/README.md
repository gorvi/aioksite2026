# æ¿€æ´»ç ç”Ÿæˆè„šæœ¬ä½¿ç”¨è¯´æ˜

## ğŸ“‹ åŠŸèƒ½

ç”ŸæˆæŒ‡å®šæ•°é‡çš„æ¿€æ´»ç ï¼ˆé»˜è®¤200ä¸ªï¼‰ï¼Œ6ä½å¤§å†™å­—æ¯ï¼Œéšæœºä¸é‡å¤ã€‚

## ğŸš€ å¿«é€Ÿä½¿ç”¨

### ç”Ÿæˆæ¿€æ´»ç å¹¶æ’å…¥æ•°æ®åº“

```bash
# 1. åœ¨æœ¬åœ°ç”ŸæˆSQLæ–‡ä»¶
cd /Users/ghw/Documents/cursor_ws/ceshi/frontend
python3 scripts/generate-codes.py > scripts/insert-codes.sql

# 2. ä¸Šä¼ åˆ°æœåŠ¡å™¨
scp scripts/insert-codes.sql root@106.54.60.14:/www/wwwroot/aioksite2026/scripts/

# 3. åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ
ssh root@106.54.60.14
cd /www/wwwroot/aioksite2026
mysql -h 127.0.0.1 -u many_ceshi -pasdasd123 many_ceshi < scripts/insert-codes.sql
```

## ğŸ“ æ–‡ä»¶è¯´æ˜

### generate-codes.py
- **è¯­è¨€**ï¼šPython 3
- **ä¾èµ–**ï¼šæ— ï¼ˆä»…æ ‡å‡†åº“ï¼‰
- **åŠŸèƒ½**ï¼š
  - ç”ŸæˆæŒ‡å®šæ•°é‡çš„æ¿€æ´»ç ï¼ˆé»˜è®¤200ä¸ªï¼‰
  - è‡ªåŠ¨å»é‡ï¼ˆé›†åˆç¡®ä¿å”¯ä¸€æ€§ï¼‰
  - è¾“å‡ºæ ‡å‡†SQL INSERTè¯­å¥
  - åŒ…å«ç»Ÿè®¡å’ŒæŸ¥è¯¢è¯­å¥

### insert-codes.sql
- **ç”Ÿæˆæ–¹å¼**ï¼šç”± `generate-codes.py` ç”Ÿæˆ
- **å†…å®¹**ï¼š
  - 200ä¸ªæ¿€æ´»ç çš„INSERTè¯­å¥
  - æŸ¥çœ‹æœ€æ–°æ’å…¥è®°å½•çš„æŸ¥è¯¢
  - ç»Ÿè®¡ä¿¡æ¯æŸ¥è¯¢

### test-db.ts
- **åŠŸèƒ½**ï¼šæµ‹è¯•æ•°æ®åº“è¿æ¥
- **ç”¨é€”**ï¼šå¼€å‘æ—¶éªŒè¯æ•°æ®åº“é…ç½®

## ğŸ”§ è‡ªå®šä¹‰é…ç½®

ç¼–è¾‘ `generate-codes.py`ï¼š

```python
# ä¿®æ”¹ç”Ÿæˆæ•°é‡
codes = generate_unique_codes(500, 6)  # ç”Ÿæˆ500ä¸ª

# ä¿®æ”¹æ¿€æ´»ç é•¿åº¦
codes = generate_unique_codes(200, 8)  # 8ä½æ¿€æ´»ç 
```

## ğŸ” æ¿€æ´»ç æ ¼å¼

- **é•¿åº¦**ï¼š6ä½ï¼ˆå¯è‡ªå®šä¹‰ï¼‰
- **å­—ç¬¦**ï¼šä»…å¤§å†™å­—æ¯ï¼ˆA-Zï¼‰
- **å”¯ä¸€æ€§**ï¼šä¸é‡å¤
- **æ€»å¯èƒ½æ•°**ï¼š26^6 = 308,915,776 ç§ç»„åˆ

## âœ… éªŒè¯ç»“æœ

è¿è¡Œå®Œæˆåï¼Œåœ¨æ•°æ®åº“ä¸­éªŒè¯ï¼š

```sql
-- æŸ¥çœ‹æœ€æ–°æ’å…¥çš„æ¿€æ´»ç 
SELECT serial_number, status, created_at 
FROM serial_numbers 
ORDER BY created_at DESC 
LIMIT 20;

-- ç»Ÿè®¡æ€»æ•°å’Œä½¿ç”¨æƒ…å†µ
SELECT 
    COUNT(*) as 'æ€»æ•°',
    SUM(CASE WHEN status = 0 THEN 1 ELSE 0 END) as 'æœªä½¿ç”¨',
    SUM(CASE WHEN status = 1 THEN 1 ELSE 0 END) as 'å·²ä½¿ç”¨'
FROM serial_numbers;

-- å¯¼å‡ºæ‰€æœ‰æœªä½¿ç”¨çš„æ¿€æ´»ç 
SELECT serial_number 
FROM serial_numbers 
WHERE status = 0 
ORDER BY created_at DESC;
```

## ğŸ’¡ æ‰¹é‡æ“ä½œ

### ç”Ÿæˆå¤šæ‰¹æ¬¡æ¿€æ´»ç 

```bash
# ç”Ÿæˆç¬¬ä¸€æ‰¹ï¼ˆ200ä¸ªï¼‰
python3 scripts/generate-codes.py > scripts/batch-1.sql

# ç”Ÿæˆç¬¬äºŒæ‰¹ï¼ˆ200ä¸ªï¼‰
python3 scripts/generate-codes.py > scripts/batch-2.sql

# ä¾æ¬¡æ‰§è¡Œ
mysql -h 127.0.0.1 -u many_ceshi -p many_ceshi < scripts/batch-1.sql
mysql -h 127.0.0.1 -u many_ceshi -p many_ceshi < scripts/batch-2.sql
```

### ç”Ÿæˆä¸åŒé•¿åº¦çš„æ¿€æ´»ç 

ä¿®æ”¹ `generate-codes.py` ä¸­çš„ `length` å‚æ•°åé‡æ–°ç”Ÿæˆã€‚

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **å”¯ä¸€æ€§**ï¼šè„šæœ¬è‡ªåŠ¨å»é‡ï¼Œä½†æ•°æ®åº“å±‚é¢ä¹Ÿæœ‰ UNIQUE çº¦æŸ
2. **å¤§å°å†™**ï¼šæ¿€æ´»ç ç»Ÿä¸€ä½¿ç”¨å¤§å†™ï¼Œæ•°æ®åº“ä¸åŒºåˆ†å¤§å°å†™åŒ¹é…
3. **æ‰¹é‡æ’å…¥**ï¼šä¸€æ¬¡æ€§æ’å…¥æ‰€æœ‰æ¿€æ´»ç ï¼Œæ•ˆç‡é«˜
4. **å¹‚ç­‰æ€§**ï¼šå¯é‡å¤æ‰§è¡Œï¼Œé‡å¤çš„æ¿€æ´»ç ä¼šè¢«æ•°æ®åº“çº¦æŸæ‹’ç»ï¼ˆå®‰å…¨ï¼‰

## ğŸ› å¸¸è§é—®é¢˜

### ç”Ÿæˆçš„æ¿€æ´»ç é‡å¤ï¼Ÿ
- è„šæœ¬ä½¿ç”¨é›†åˆï¼ˆsetï¼‰è‡ªåŠ¨å»é‡
- å¦‚æœé‡å¤ç‡é«˜ï¼Œè€ƒè™‘å¢åŠ æ¿€æ´»ç é•¿åº¦

### SQLæ‰§è¡Œå¤±è´¥ï¼Ÿ
```
ERROR 1062 (23000): Duplicate entry
```
- æ­£å¸¸ç°è±¡ï¼Œè¯´æ˜æ¿€æ´»ç å·²å­˜åœ¨
- è„šæœ¬å¯ä»¥é‡æ–°è¿è¡Œç”Ÿæˆæ–°çš„æ¿€æ´»ç 

### éœ€è¦æ›´å¤šæ¿€æ´»ç ï¼Ÿ
- ä¿®æ”¹ `generate_unique_codes(200, 6)` ä¸­çš„ 200 ä¸ºæ›´å¤§çš„æ•°å­—
- æˆ–å¤šæ¬¡è¿è¡Œè„šæœ¬ç”Ÿæˆå¤šæ‰¹æ¬¡

## ğŸ“Š æ€§èƒ½å‚è€ƒ

- **ç”Ÿæˆé€Ÿåº¦**ï¼š200ä¸ªæ¿€æ´»ç  < 1ç§’
- **æ’å…¥é€Ÿåº¦**ï¼š200ä¸ªæ¿€æ´»ç çº¦ 0.5ç§’ï¼ˆå–å†³äºæ•°æ®åº“æ€§èƒ½ï¼‰
- **æ¨èæ‰¹æ¬¡**ï¼šå•æ¬¡ä¸è¶…è¿‡ 1000 ä¸ª

## ğŸ” å®‰å…¨å»ºè®®

1. **ä¸è¦æäº¤**ï¼š`insert-codes.sql` åŒ…å«å®é™…æ¿€æ´»ç ï¼Œä¸è¦æäº¤åˆ° Git
2. **å®šæœŸæ¸…ç†**ï¼šåˆ é™¤å·²ä½¿ç”¨çš„æ—§æ¿€æ´»ç è®°å½•
3. **ç›‘æ§ä½¿ç”¨**ï¼šå®šæœŸæ£€æŸ¥æ¿€æ´»ç ä½¿ç”¨æƒ…å†µ

---

**æœ€åæ›´æ–°**ï¼š2026-01-06  
**å½“å‰ç‰ˆæœ¬**ï¼šPython 3 è„šæœ¬ + SQL æ‰¹é‡æ’å…¥
